{% extends "base.html" %}
{% load static %}


{% block main %}
<h1>{{ quiz.name }}</h1>
<div class="page" id="main">
    <div id="map"></div>
    <div id="panel-info">
        <div id="question">
            
        </div>
        <div id="time">
            <span id="time-string">0:00</span>
        </div>
        <div id="progress">
            <p>Puntuación: <span id="points">0</span></p>
        </div>
        <div id="info">

        </div>
        <div id="mini-image">
            <img id="mini-image-img" src="{{ quiz.front_image_url }}">
        </div>
        <div></div>
        <div class="panel-center">
            <a class="secondary-action-button" id="share">Compartir</a>
        </div>
    </div>
</div>
<div id="comments-center">
<div id="comments">
    {% if num_comments == 0 %}
    <div>
        No hay comentarios todavía. Sé el primero en dejar tu opinión.
    </div>
    {% else %}
    {% for comment in comments %}
    <div>
        <p>{{ comment.content }}</p>
        <small><a href="/profile/{{ comment.author.username }}/">{{ comment.author.username }}</a> - {{ comment.created_at | date:"j/n/Y G:i" }} </small>
    </div>
    {% endfor %}
    {% endif %}
    <hr/>
    <h4>Dejar nuevo comentario</h4>
    {% if user.is_authenticated %}
    <form method="POST" action="{% url 'add-comment' quiz.pk %}">
        {% csrf_token %}
        <label for="comment-content">Texto:</label>
        <textarea name="content" required id="comment-content" placeholder="Un mapa muy interesante. 10/10"></textarea>
        <input class="secondary-action-button" type="submit" value="Publicar comentario">
    </form>
    {% else %}
    <div>
        <a href="{% url 'login' %}">Inicia sesión</a> o <a href="{% url 'register' %}">regístrate</a> para dejar un comentario.
    </div>
    <hr/>
    {% endif %}
</div>
</div>
<div id="dialog-background"></div>
<div id="share-dialog" class="dialog">
    <div id="share-dialog-top">
        <h2>Compartir:</h2>
        <div id="close-share-dialog"></div>
    </div>
    <div id="share-dialog-middle">
        <p>Comparte el mapaquiz en redes sociales</p>
        <div id="share-icons">
            <a href="https://www.facebook.com/sharer.php?u=https://mapaquiz.com{{ request.path }}" id="share-dialog-facebook"></a>
            <a href="https://www.twitter.com/share?url=https://mapaquiz.com{{ request.path }}&via=mapaly"" id="share-dialog-twitter"></a>
            <a href="https://reddit.com/submit?url=https://mapaquiz.com{{ request.path }}" id="share-dialog-reddit"></a>
            <a href="https://t.me/share/url?url=https://mapaquiz.com{{ request.path }}" id="share-dialog-telegram"></a>
            <a href="mailto:?body=https://mapaquiz.com{{ request.path }}" id="share-dialog-email"></a>
            <a href="https://wa.me/?text=https://mapaquiz.com{{ request.path }}" id="share-dialog-whatsapp"></a>
        </div>
    </div>
</div>
<div id="win-dialog" class="dialog">
    <div id="win-dialog-top">
        <h2>¡Victoria!</h2>
        <div id="close-win-dialog"></div>
    </div>
    <div id="win-dialog-middle">
        <p>¡Enhorabuena por acabar el mapaquiz "{{ quiz.name }}"! Has tardado <span id="time-string-dialog"></span> y has conseguido <span id="points-dialog"></span> puntos.</p>
    </div>
</div>
<script type="module" src="{% static 'bundle.js' %}"></script>
{% endblock %}